<button id="connectBtn">Connect</button>
<pre id="output"></pre>

<script>
document.getElementById('connectBtn').addEventListener('click', async () => {
    try {
        const port = await navigator.serial.requestPort();
        await port.open({ baudRate: 9600 });

        const reader = port.readable.getReader();

        while (true) {
            const { value, done } = await reader.read();
            if (done) break;

            document.getElementById("output").innerText +=
                new TextDecoder().decode(value);
        }

    } catch (err) {
        alert('Error: ' + err);
    }
});
</script>
